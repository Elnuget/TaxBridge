<div class="clients-show-user">
  <c-container>
    <c-row>
      <c-col>
        <!-- Spinner de carga -->
        <div *ngIf="loading" class="text-center py-5">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Cargando...</span>
          </div>
          <p class="mt-3 text-muted">Cargando información del usuario...</p>
        </div>

        <!-- Mensaje de error -->
        <div *ngIf="error && !loading" class="alert alert-danger">
          {{ error }}
          <div class="mt-3">
            <a [routerLink]="['/clients']">
              <button cButton color="secondary">Volver al listado</button>
            </a>
          </div>
        </div>

        <!-- Datos del usuario -->
        <div *ngIf="user && !loading">
          <!-- Header con acciones -->
          <c-card class="mb-4">
            <c-card-header class="d-flex justify-content-between align-items-start">
              <div>
                <h3 class="mb-1">{{ user.nombre }}</h3>
                <p class="text-muted mb-0">Usuario del Sistema</p>
              </div>
              <div class="btn-group">
                <a [routerLink]="['/clients/edit-user', user._id]">
                  <button cButton color="warning">
                    <i class="cil-pencil"></i> Editar
                  </button>
                </a>
                <a [routerLink]="['/clients']">
                  <button cButton color="secondary" class="ms-2">
                    <i class="cil-arrow-left"></i> Volver
                  </button>
                </a>
              </div>
            </c-card-header>
            <c-card-body class="text-center">
              <!-- Avatar con inicial -->
              <div class="user-avatar">
                {{ user.nombre.charAt(0).toUpperCase() }}
              </div>
              <div class="mb-2">
                <c-badge [color]="getRoleBadge(user.rol)" class="badge-lg me-2">
                  {{ getRoleText(user.rol) }}
                </c-badge>
                <c-badge [color]="getStatusBadge(user.activo)" class="badge-lg">
                  {{ getStatusText(user.activo) }}
                </c-badge>
              </div>
            </c-card-body>
          </c-card>

          <!-- Información Personal -->
          <c-card class="mb-4">
            <c-card-header>
              <h4 class="section-title mb-0">Información Personal</h4>
            </c-card-header>
            <c-card-body>
              <c-row>
                <c-col md="6">
                  <div class="info-row">
                    <div class="info-label">Nombre Completo</div>
                    <div class="info-value">{{ user.nombre }}</div>
                  </div>
                </c-col>
                <c-col md="6">
                  <div class="info-row">
                    <div class="info-label">Email</div>
                    <div class="info-value">{{ user.email }}</div>
                  </div>
                </c-col>
                <c-col md="6">
                  <div class="info-row">
                    <div class="info-label">Teléfono</div>
                    <div class="info-value">{{ user.telefono || 'No registrado' }}</div>
                  </div>
                </c-col>
                <c-col md="6">
                  <div class="info-row">
                    <div class="info-label">Dirección</div>
                    <div class="info-value">{{ user.direccion || 'No registrada' }}</div>
                  </div>
                </c-col>
              </c-row>
            </c-card-body>
          </c-card>

          <!-- Información del Sistema -->
          <c-card class="mb-4">
            <c-card-header>
              <h4 class="section-title mb-0">Información del Sistema</h4>
            </c-card-header>
            <c-card-body>
              <c-row>
                <c-col md="4">
                  <div class="info-row">
                    <div class="info-label">Rol</div>
                    <div class="info-value">
                      <c-badge [color]="getRoleBadge(user.rol)">
                        {{ getRoleText(user.rol) }}
                      </c-badge>
                    </div>
                  </div>
                </c-col>
                <c-col md="4">
                  <div class="info-row">
                    <div class="info-label">Estado</div>
                    <div class="info-value">
                      <c-badge [color]="getStatusBadge(user.activo)">
                        {{ getStatusText(user.activo) }}
                      </c-badge>
                    </div>
                  </div>
                </c-col>
                <c-col md="4">
                  <div class="info-row">
                    <div class="info-label">ID de Usuario</div>
                    <div class="info-value">
                      <small class="font-monospace">{{ user._id }}</small>
                    </div>
                  </div>
                </c-col>
              </c-row>
            </c-card-body>
          </c-card>

          <!-- Fechas de Registro -->
          <c-card>
            <c-card-header>
              <h4 class="section-title mb-0">Registro y Actividad</h4>
            </c-card-header>
            <c-card-body>
              <c-row>
                <c-col md="6">
                  <div class="info-row">
                    <div class="info-label">Fecha de Registro</div>
                    <div class="info-value">{{ formatDate(user.createdAt) }}</div>
                  </div>
                </c-col>
                <c-col md="6">
                  <div class="info-row">
                    <div class="info-label">Última Actualización</div>
                    <div class="info-value">{{ formatDate(user.updatedAt) }}</div>
                  </div>
                </c-col>
              </c-row>
            </c-card-body>
          </c-card>
        </div>
      </c-col>
    </c-row>
  </c-container>
</div>
