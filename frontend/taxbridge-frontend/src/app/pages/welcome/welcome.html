<!-- Products Section -->
<section class="products-section">
  <c-container>
    <div class="section-header">
      <h2>Nuestros Productos</h2>
      <p>Soluciones diseÃ±adas para PYMEs ecuatorianas</p>
    </div>

    <!-- Search and Filters -->
    <div class="filters-container">
      <c-row class="g-3 mb-4">
        <c-col md="4">
          <div class="search-box">
            <input 
              type="text" 
              cFormControl
              [(ngModel)]="searchTerm"
              placeholder="ğŸ” Buscar productos..."
              class="search-input"
            />
          </div>
        </c-col>
        
        <c-col md="3">
          <select 
            cFormSelect
            [(ngModel)]="selectedCategory"
            class="filter-select"
          >
            <option value="all">ğŸ“‚ Todas las categorÃ­as</option>
            <option value="apis">ğŸ”Œ APIs</option>
            <option value="planes">ğŸ“¦ Planes</option>
            <option value="contabilidad">ğŸ“Š Contabilidad</option>
            <option value="recursos-humanos">ğŸ‘¥ Recursos Humanos</option>
            <option value="tributario">ğŸ“‹ Tributario</option>
            <option value="servicios">ğŸ’¼ Servicios</option>
          </select>
        </c-col>
        
        <c-col md="3">
          <select 
            cFormSelect
            [(ngModel)]="priceRange"
            class="filter-select"
          >
            <option value="all">ğŸ’° Todos los precios</option>
            <option value="low">ğŸ’µ Menos de $10</option>
            <option value="medium">ğŸ’³ $10 - $50</option>
            <option value="high">ğŸ’ MÃ¡s de $50</option>
          </select>
        </c-col>
        
        <c-col md="2">
          <button 
            cButton 
            color="secondary" 
            variant="outline"
            class="w-100"
            (click)="clearFilters()"
          >
            ğŸ”„ Limpiar
          </button>
        </c-col>
      </c-row>

      <!-- Results Counter -->
      <div class="results-info">
        <p>
          <strong>{{ products.length }}</strong> 
          {{ products.length === 1 ? 'producto encontrado' : 'productos encontrados' }}
        </p>
      </div>
    </div>

    <!-- Products Grid -->
    <c-row class="g-4">
      @if (products.length > 0) {
        @for (product of products; track product.name) {
          <c-col md="6" lg="4">
            <c-card class="product-card h-100">
              <c-card-header class="product-header">
                <h3>{{ product.name }}</h3>
                @if (product.badge) {
                  <c-badge [color]="product.badgeColor || 'primary'">
                    {{ product.badge }}
                  </c-badge>
                }
              </c-card-header>
              <c-card-body class="product-body">
                <div class="product-price">
                  <span class="price">{{ product.price }}</span>
                  <span class="price-description">{{ product.description }}</span>
                  @if (product.priceValue < 1) {
                    <span class="minimum-purchase">ğŸ’¡ Compra mÃ­nima: $5.00</span>
                  }
                </div>
                
                <ul class="product-features">
                  @for (feature of product.features; track feature) {
                    <li>
                      <span class="check-icon">âœ“</span>
                      {{ feature }}
                    </li>
                  }
                </ul>
                
                <div class="product-actions">
                  <button 
                    cButton 
                    color="primary" 
                    variant="outline"
                    class="btn-add-cart"
                    (click)="addToCart(product)"
                  >
                    ğŸ›’ Agregar al Carrito
                  </button>
                  
                  <button 
                    cButton 
                    color="primary" 
                    class="btn-buy-now"
                    (click)="buyNow(product)"
                  >
                    âš¡ Comprar Ahora
                  </button>
                </div>
              </c-card-body>
            </c-card>
          </c-col>
        }
      } @else {
        <c-col cols="12">
          <div class="no-results">
            <div class="no-results-icon">ğŸ”</div>
            <h3>No se encontraron productos</h3>
            <p>Intenta ajustar los filtros o buscar con otros tÃ©rminos</p>
            <button cButton color="primary" (click)="clearFilters()">
              Ver todos los productos
            </button>
          </div>
        </c-col>
      }
    </c-row>
  </c-container>
</section>
